<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BrocMap - Carte</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/map.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
  </head>
  <body>
    <header class="header">
      <button id="open-search" class="btn-main">Recherche</button>
    </header>

    <!-- POPUP AUTORISATION -->
    <div
      class="popup-overlay"
      id="popupOverlay"
      role="dialog"
      aria-modal="true"
    >
      <div class="popup-box popup-box--ios">
        <div class="popup-top popup-top--stack">
          <div class="popup-appicon" aria-hidden="true">
            <img src="./images/AppIcon.png" alt="" />
          </div>

          <div class="popup-text">
            <h2>Autoriser “Trôve” à utiliser votre position ?</h2>
            <p>
              Votre position est utilisée pour indiquer votre position sur le
              plan, obtenir des itinéraires et des estimations de temps de
              trajet, ainsi que pour améliorer les résultats de recherche.
            </p>
          </div>
        </div>

        <!-- Aperçu carte (ton image Fields.png) -->
        <div class="popup-mappreview">
          <img src="./images/Fields.png" alt="" />
        </div>

        <div class="popup-actions popup-actions--ios">
          <button class="popup-pill" type="button" data-loc-action="once">
            Autoriser une fois
          </button>

          <button class="popup-pill" type="button" data-loc-action="active">
            Autoriser lorsque l’app est active
          </button>

          <button
            class="popup-pill popup-pill--danger"
            type="button"
            data-loc-action="deny"
          >
            Ne pas autoriser
          </button>
        </div>
      </div>
    </div>

    <main class="map-content">
      <div class="carte-app" id="maMap"></div>
    </main>

    <!-- OVERLAY + BOTTOM SHEET BROCANTE -->
    <div class="broc-sheet-overlay" id="brocanteSheetOverlay"></div>

    <section class="broc-sheet" id="brocanteSheet" aria-hidden="true">
      <div class="broc-handle" aria-hidden="true"></div>

      <div class="broc-media">
        <img id="brocSheetImage" alt="" />
        <button
          class="broc-like"
          id="brocLikeBtn"
          type="button"
          aria-label="Favori"
        >
          ♡
        </button>

        <div class="broc-live" id="brocLiveBadge">
          Flux en direct <span class="broc-play" aria-hidden="true">▶</span>
        </div>
      </div>

      <div class="broc-body" id="brocantePopupContent">
        <!-- Contenu dynamique JS -->
      </div>

      <div class="broc-actions">
        <button class="broc-btn broc-btn-share" id="brocShareBtn" type="button">
          Partager <span class="broc-icon" aria-hidden="true"></span>
        </button>
        <button class="broc-btn broc-btn-go" id="brocGoBtn" type="button">
          M’y rendre <span class="broc-icon" aria-hidden="true"></span>
        </button>
      </div>
    </section>

    <div class="search-popup-overlay" id="searchPopupOverlay"></div>
    <div class="search-popup" id="searchPopup">
      <div class="search-popup-content">
        <!-- Où ? -->
        <label>Où ?</label>
        <div class="search-row">
          <button id="btn-geoloc" class="btn-geoloc">A proximité</button>
          <input
            type="text"
            id="search-city"
            placeholder="Rechercher un lieu ..."
          />
        </div>

        <!-- Quand ? -->
        <label>Quand ?</label>
        <input type="date" id="search-date" />

        <!-- Quoi ? -->
        <label>Quoi ?</label>
        <div class="tags">
          <span class="tag" data-type="periode" data-value="permanente"
            >permanente</span
          >
          <span class="tag" data-type="periode" data-value="temporaire"
            >temporaire</span
          >
        </div>

        <div class="tags">
          <span class="tag" data-type="categorie" data-value="Marché aux Puces"
            >Marchés aux Puces</span
          >
          <span class="tag" data-type="categorie" data-value="Brocante"
            >Brocantes</span
          >
        </div>

        <div class="tags">
          <span class="tag" data-type="tag" data-value="puces">puces</span>
          <span class="tag" data-type="tag" data-value="vintage">vintage</span>
          <span class="tag" data-type="tag" data-value="antiquités"
            >antiquités</span
          >
          <span class="tag" data-type="tag" data-value="alimentaire"
            >alimentaire</span
          >
        </div>
      </div>
    </div>

    <nav class="navbar">
      <ul class="nav-links">
        <li>
          <a href="profil.html" class="nav-item">
            <img src="images/profil.png" alt="Profil" class="nav-icon" />
            <span>profil</span>
          </a>
        </li>
        <li>
          <a href="messages.html" class="nav-item">
            <img src="images/messages.png" alt="Messages" class="nav-icon" />
            <span>messages</span>
          </a>
        </li>
        <li>
          <a href="annonces.html" class="nav-item">
            <img src="images/annonces.png" alt="Annonces" class="nav-icon" />
            <span>annonces</span>
          </a>
        </li>
        <li>
          <a href="agenda.html" class="nav-item">
            <img src="images/agenda.png" alt="Agenda" class="nav-icon" />
            <span>agenda</span>
          </a>
        </li>
        <li>
          <a href="reglages.html" class="nav-item">
            <img src="images/reglages.png" alt="Réglages" class="nav-icon" />
            <span>réglages</span>
          </a>
        </li>
      </ul>
    </nav>

    <script src="js/burger.js"></script>
    <script src="js/popup.js"></script>
    <script src="js/search-popup.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="js/map.js"></script>
  </body>
</html>
