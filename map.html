<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BrocMap - Carte</title>

    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/map.css" />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
  </head>

  <body>
    <!-- HEADER MAP : Recherche + Switch -->
    <header class="header header--map">
      <button id="open-search" class="btn-main">Rechercher</button>

      <!-- Switch brocantes/amis -->
      <button
        id="switchMapBtn"
        class="switch-map-btn"
        type="button"
        aria-label="Basculer brocantes/amis"
      >
        <img
          id="switchMapIcon"
          src="images/icon_switch_map.png"
          alt=""
          draggable="false"
        />
      </button>
    </header>

    <!-- POPUP AUTORISATION -->
    <div class="popup-overlay" id="popupOverlay" role="dialog" aria-modal="true">
      <div class="popup-box popup-box--ios">
        <div class="popup-top popup-top--stack">
          <div class="popup-appicon" aria-hidden="true">
            <img src="./images/AppIcon.png" alt="" />
          </div>

          <div class="popup-text">
            <h2>Autoriser ‚ÄúTr√¥ve‚Äù √† utiliser votre position ?</h2>
            <p>
              Votre position est utilis√©e pour indiquer votre position sur le plan,
              obtenir des itin√©raires et des estimations de temps de trajet, ainsi que
              pour am√©liorer les r√©sultats de recherche.
            </p>
          </div>
        </div>

        <div class="popup-mappreview">
          <img src="./images/Fields.png" alt="" />
          <div class="popup-exact-pill">
            <span class="pill-dot" aria-hidden="true"></span>
            Position exacte : <strong>Oui</strong>
          </div>
        </div>

        <div class="popup-actions popup-actions--ios">
          <button class="popup-pill" type="button" data-loc-action="once">
            Autoriser une fois
          </button>

          <button class="popup-pill" type="button" data-loc-action="active">
            Autoriser lorsque l‚Äôapp est active
          </button>

          <button class="popup-pill popup-pill--danger" type="button" data-loc-action="deny">
            Ne pas autoriser
          </button>
        </div>
      </div>
    </div>

    <main class="map-content">
      <div class="carte-app" id="maMap"></div>
    </main>

    <!-- OVERLAY + BOTTOM SHEET BROCANTE -->
    <div class="broc-sheet-overlay" id="brocanteSheetOverlay"></div>

    <section class="broc-sheet" id="brocanteSheet" aria-hidden="true">
      <div class="broc-handle" aria-hidden="true"></div>

      <div class="broc-media">
        <img id="brocSheetImage" alt="" />
        <button class="broc-like" id="brocLikeBtn" type="button" aria-label="Favori">
          ‚ô°
        </button>

        <div class="broc-live" id="brocLiveBadge">
          Flux en direct <span class="broc-play" aria-hidden="true">‚ñ∂</span>
        </div>
      </div>

      <div class="broc-body" id="brocantePopupContent"></div>

      <div class="broc-actions">
        <button class="broc-btn broc-btn-share" id="brocShareBtn" type="button">
          Partager <span class="broc-icon" aria-hidden="true"></span>
        </button>
        <button class="broc-btn broc-btn-go" id="brocGoBtn" type="button">
          M‚Äôy rendre <span class="broc-icon" aria-hidden="true"></span>
        </button>
      </div>
    </section>

    <!-- SEARCH POPUP -->
    <div class="search-popup-overlay" id="searchPopupOverlay"></div>

<div class="search-popup" id="searchPopup" aria-hidden="true">
  <div class="search-popup-content">
    <!-- O√π ? -->
    <h3 class="sp-title">O√π ?</h3>

    <div class="sp-where-row">
      <button id="btn-geoloc" class="sp-pill sp-pill--green" type="button">
        üìç √Ä proximit√©
      </button>
      <input
      type="text"
      id="search-city"
      class="sp-input"
      placeholder="Rechercher un lieu ..."
    />
    </div>    

    <!-- Quand ? -->
    <h3 class="sp-title">Quand ?</h3>

    <!-- Calendrier int√©gr√© -->
    <div class="cal-card" id="calCard">
      <div class="cal-head">
        <div class="cal-month" id="calMonthLabel">Janvier 2026</div>

        <div class="cal-nav">
          <button type="button" class="cal-nav-btn" id="calPrev" aria-label="Mois pr√©c√©dent">‚Äπ</button>
          <button type="button" class="cal-nav-btn" id="calNext" aria-label="Mois suivant">‚Ä∫</button>
        </div>
      </div>

      <div class="cal-weekdays">
        <span>L</span><span>M</span><span>M</span><span>J</span><span>V</span><span>S</span><span>D</span>
      </div>

      <div class="cal-grid" id="calGrid"></div>

      <input type="hidden" id="search-date" />
    </div>

    <!-- Quoi ? -->
    <h3 class="sp-title">Quoi ?</h3>

    <div class="tags">
      <span class="tag" data-type="periode" data-value="permanente">permanente</span>
      <span class="tag" data-type="periode" data-value="temporaire">temporaire</span>
    </div>

    <div class="tags">
      <span class="tag" data-type="categorie" data-value="March√© aux Puces">March√©s aux Puces</span>
      <span class="tag" data-type="categorie" data-value="Brocante">Brocantes</span>
    </div>

    <div class="tags">
      <span class="tag" data-type="tag" data-value="puces">puces</span>
      <span class="tag" data-type="tag" data-value="vintage">vintage</span>
      <span class="tag" data-type="tag" data-value="antiquit√©s">antiquit√©s</span>
      <span class="tag" data-type="tag" data-value="alimentaire">alimentaire</span>
    </div>
  </div>
</div>


    <nav class="navbar">
      <ul class="nav-links">
        <li>
          <a href="profil.html" class="nav-item">
            <img src="images/profil.png" alt="Profil" class="nav-icon" />
            <span>profil</span>
          </a>
        </li>
        <li>
          <a href="messages.html" class="nav-item">
            <img src="images/messages.png" alt="Messages" class="nav-icon" />
            <span>messages</span>
          </a>
        </li>
        <li>
          <a href="annonces.html" class="nav-item">
            <img src="images/annonces.png" alt="Annonces" class="nav-icon" />
            <span>annonces</span>
          </a>
        </li>
        <li>
          <a href="agenda.html" class="nav-item">
            <img src="images/agenda.png" alt="Agenda" class="nav-icon" />
            <span>agenda</span>
          </a>
        </li>
        <li>
          <a href="reglages.html" class="nav-item">
            <img src="images/reglages.png" alt="R√©glages" class="nav-icon" />
            <span>r√©glages</span>
          </a>
        </li>
      </ul>
    </nav>

    <script src="js/burger.js"></script>
    <script src="js/popup.js"></script>
    <script src="js/search-popup.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="js/map.js"></script>
  </body>
</html>
